<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>Result Grouping | Apache Solr Reference Guide</title>

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-solr.css">
<link rel="stylesheet" href="css/ref-guide.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="Apache Solr Reference Guide" href="https://home.apache.org/~ctargett/RefGuidePOC/jekyll-full/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // we do *NOT* want cookies used to save the current stage of the sidebar
                             // instead the code in sidebar.html will ensure that the current page
                             // (and it's ancestors) are "active" on page load
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="apache-solr-reference-guide.html">&nbsp;<span class="projectTitle"> Solr Ref Guide 7.0</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- Link to Solr website -->
                <li><a href="https://lucene.apache.org/solr/news" target="_blank">Solr News</a></li>
                <!-- Solr Resources dropdown -->
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Solr Resources<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                       <li><a href="https://lucene.apache.org/solr/7_0_0//solr-core/index.html" target="_blank">Solr Javadocs</a></li>
                       <li><a href="https://git1-us-west.apache.org/repos/asf?p=lucene-solr.git" target="_blank">Lucene/Solr Source Code</a></li>
                       <li><a href="https://lucene.apache.org/solr/resources.html#community" target="_blank">Solr Community Links</a></li>
                    </ul>
                </li>
                
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Result Grouping">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div class="col-lg-12">&nbsp;</div>
  <!-- Content Row -->
  <div class="row">
    <!-- Sidebar Column -->
    <div class="col-md-3">
      

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle">Apache Solr Reference Guide <!-- TODO: version from site.data --></li>
  
  <li class="sb-level1">
    <a href="about-this-guide.html">About This Guide</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="getting-started.html">Getting Started</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="installing-solr.html">Installing Solr</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="running-solr.html">Running Solr</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="a-quick-overview.html">A Quick Overview</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="a-step-closer.html">A Step Closer</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="solr-control-script-reference.html">Solr Control Script Reference</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="upgrading-solr.html">Upgrading Solr</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="using-the-solr-administration-user-interface.html">Using the Solr Administration User Interface</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="overview-of-the-solr-admin-ui.html">Overview of the Solr Admin UI</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="getting-assistance.html">Getting Assistance</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="logging.html">Logging</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="cloud-screens.html">Cloud Screens</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="collections-core-admin.html">Collections / Core Admin</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="java-properties.html">Java Properties</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="thread-dump.html">Thread Dump</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="collection-specific-tools.html">Collection-Specific Tools</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="analysis-screen.html">Analysis Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="dataimport-screen.html">Dataimport Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="documents-screen.html">Documents Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="files-screen.html">Files Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="query-screen.html">Query Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="stream-screen.html">Stream Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="schema-browser-screen.html">Schema Browser Screen</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="core-specific-tools.html">Core-Specific Tools</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="ping.html">Ping</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="plugins-stats-screen.html">Plugins &amp; Stats Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="replication-screen.html">Replication Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="segments-info.html">Segments Info</a>
            
          </li>
          
        </ul>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="documents-fields-and-schema-design.html">Documents, Fields, and Schema Design</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="overview-of-documents-fields-and-schema-design.html">Overview of Documents, Fields, and Schema Design</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="solr-field-types.html">Solr Field Types</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="field-type-definitions-and-properties.html">Field Type Definitions and Properties</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="field-types-included-with-solr.html">Field Types Included with Solr</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="working-with-currencies-and-exchange-rates.html">Working with Currencies and Exchange Rates</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="working-with-dates.html">Working with Dates</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="working-with-enum-fields.html">Working with Enum Fields</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="working-with-external-files-and-processes.html">Working with External Files and Processes</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="field-properties-by-use-case.html">Field Properties by Use Case</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="defining-fields.html">Defining Fields</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="copying-fields.html">Copying Fields</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="dynamic-fields.html">Dynamic Fields</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="other-schema-elements.html">Other Schema Elements</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="schema-api.html">Schema API</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="putting-the-pieces-together.html">Putting the Pieces Together</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="docvalues.html">DocValues</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="schemaless-mode.html">Schemaless Mode</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="understanding-analyzers-tokenizers-and-filters.html">Understanding Analyzers, Tokenizers, and Filters</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="analyzers.html">Analyzers</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="about-tokenizers.html">About Tokenizers</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="about-filters.html">About Filters</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="tokenizers.html">Tokenizers</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="filter-descriptions.html">Filter Descriptions</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="charfilterfactories.html">CharFilterFactories</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="language-analysis.html">Language Analysis</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="phonetic-matching.html">Phonetic Matching</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="running-your-analyzer.html">Running Your Analyzer</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="indexing-and-basic-data-operations.html">Indexing and Basic Data Operations</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="introduction-to-solr-indexing.html">Introduction to Solr Indexing</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="post-tool.html">Post Tool</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="uploading-data-with-index-handlers.html">Uploading Data with Index Handlers</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="transforming-and-indexing-custom-json.html">Transforming and Indexing Custom JSON</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="uploading-data-with-solr-cell-using-apache-tika.html">Uploading Data with Solr Cell using Apache Tika</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="uploading-structured-data-store-data-with-the-data-import-handler.html">Uploading Structured Data Store Data with the Data Import Handler</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="updating-parts-of-documents.html">Updating Parts of Documents</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="detecting-languages-during-indexing.html">Detecting Languages During Indexing</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="de-duplication.html">De-Duplication</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="content-streams.html">Content Streams</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="uima-integration.html">UIMA Integration</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="searching.html">Searching</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="overview-of-searching-in-solr.html">Overview of Searching in Solr</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="velocity-search-ui.html">Velocity Search UI</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="relevance.html">Relevance</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="query-syntax-and-parsing.html">Query Syntax and Parsing</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="common-query-parameters.html">Common Query Parameters</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="the-standard-query-parser.html">The Standard Query Parser</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="the-dismax-query-parser.html">The DisMax Query Parser</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="the-extended-dismax-query-parser.html">The Extended DisMax Query Parser</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="function-queries.html">Function Queries</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="local-parameters-in-queries.html">Local Parameters in Queries</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="other-parsers.html">Other Parsers</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="faceting.html">Faceting</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="blockjoin-faceting.html">BlockJoin Faceting</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="highlighting.html">Highlighting</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="spell-checking.html">Spell Checking</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="query-re-ranking.html">Query Re-Ranking</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="learning-to-rank.html">Learning To Rank</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="transforming-result-documents.html">Transforming Result Documents</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="suggester.html">Suggester</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="morelikethis.html">MoreLikeThis</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="pagination-of-results.html">Pagination of Results</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="collapse-and-expand-results.html">Collapse and Expand Results</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="result-grouping.html">Result Grouping</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="result-clustering.html">Result Clustering</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="spatial-search.html">Spatial Search</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="the-terms-component.html">The Terms Component</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="the-term-vector-component.html">The Term Vector Component</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="the-stats-component.html">The Stats Component</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="the-query-elevation-component.html">The Query Elevation Component</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="response-writers.html">Response Writers</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="velocity-response-writer.html">Velocity Response Writer</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="near-real-time-searching.html">Near Real Time Searching</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="realtime-get.html">RealTime Get</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="exporting-result-sets.html">Exporting Result Sets</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="streaming-expressions.html">Streaming Expressions</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="graph-traversal.html">Graph Traversal</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="parallel-sql-interface.html">Parallel SQL Interface</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="solr-jdbc-dbvisualizer.html">Solr JDBC - DbVisualizer</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solr-jdbc-squirrel-sql.html">Solr JDBC - SQuirreL SQL</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solr-jdbc-apache-zeppelin.html">Solr JDBC - Apache Zeppelin</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solr-jdbc-python-jython.html">Solr JDBC - Python/Jython</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solr-jdbc-r.html">Solr JDBC - R</a>
            
          </li>
          
        </ul>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="the-well-configured-solr-instance.html">The Well-Configured Solr Instance</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="configuring-solrconfig-xml.html">Configuring solrconfig.xml</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="datadir-and-directoryfactory-in-solrconfig.html">DataDir and DirectoryFactory in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="lib-directives-in-solrconfig.html">Lib Directives in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="schema-factory-definition-in-solrconfig.html">Schema Factory Definition in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="indexconfig-in-solrconfig.html">IndexConfig in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="requesthandlers-and-searchcomponents-in-solrconfig.html">RequestHandlers and SearchComponents in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="initparams-in-solrconfig.html">InitParams in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="updatehandlers-in-solrconfig.html">UpdateHandlers in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="query-settings-in-solrconfig.html">Query Settings in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="requestdispatcher-in-solrconfig.html">RequestDispatcher in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="update-request-processors.html">Update Request Processors</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="codec-factory.html">Codec Factory</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="solr-cores-and-solr-xml.html">Solr Cores and solr.xml</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="format-of-solr-xml.html">Format of solr.xml</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="defining-core-properties.html">Defining core.properties</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="coreadmin-api.html">CoreAdmin API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="config-sets.html">Config Sets</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="configuration-apis.html">Configuration APIs</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="blob-store-api.html">Blob Store API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="config-api.html">Config API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="request-parameters-api.html">Request Parameters API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="managed-resources.html">Managed Resources</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="implicit-requesthandlers.html">Implicit RequestHandlers</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="solr-plugins.html">Solr Plugins</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="adding-custom-plugins-in-solrcloud-mode.html">Adding Custom Plugins in SolrCloud Mode</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="jvm-settings.html">JVM Settings</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="managing-solr.html">Managing Solr</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="taking-solr-to-production.html">Taking Solr to Production</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="securing-solr.html">Securing Solr</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="authentication-and-authorization-plugins.html">Authentication and Authorization Plugins</a>
            
            <ul>
              
              <li class="sb-level4">
                <a href="basic-authentication-plugin.html">Basic Authentication Plugin</a>
                
              </li>
              
              <li class="sb-level4">
                <a href="hadoop-authentication-plugin.html">Hadoop Authentication Plugin</a>
                
              </li>
              
              <li class="sb-level4">
                <a href="kerberos-authentication-plugin.html">Kerberos Authentication Plugin</a>
                
              </li>
              
              <li class="sb-level4">
                <a href="rule-based-authorization-plugin.html">Rule-Based Authorization Plugin</a>
                
              </li>
              
            </ul>
            
          </li>
          
          <li class="sb-level3">
            <a href="enabling-ssl.html">Enabling SSL</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="running-solr-on-hdfs.html">Running Solr on HDFS</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="making-and-restoring-backups.html">Making and Restoring Backups</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="configuring-logging.html">Configuring Logging</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-jmx-with-solr.html">Using JMX with Solr</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="mbean-request-handler.html">MBean Request Handler</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="performance-statistics-reference.html">Performance Statistics Reference</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="metrics-reporting.html">Metrics Reporting</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="v2-api.html">v2 API</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="solrcloud.html">SolrCloud</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="getting-started-with-solrcloud.html">Getting Started with SolrCloud</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="how-solrcloud-works.html">How SolrCloud Works</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="shards-and-indexing-data-in-solrcloud.html">Shards and Indexing Data in SolrCloud</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="distributed-requests.html">Distributed Requests</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="read-and-write-side-fault-tolerance.html">Read and Write Side Fault Tolerance</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="solrcloud-configuration-and-parameters.html">SolrCloud Configuration and Parameters</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="setting-up-an-external-zookeeper-ensemble.html">Setting Up an External ZooKeeper Ensemble</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="using-zookeeper-to-manage-configuration-files.html">Using ZooKeeper to Manage Configuration Files</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="zookeeper-access-control.html">ZooKeeper Access Control</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="collections-api.html">Collections API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="parameter-reference.html">Parameter Reference</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="command-line-utilities.html">Command Line Utilities</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solrcloud-with-legacy-configuration-files.html">SolrCloud with Legacy Configuration Files</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="configsets-api.html">ConfigSets API</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="rule-based-replica-placement.html">Rule-based Replica Placement</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="cross-data-center-replication-cdcr-.html">Cross Data Center Replication (CDCR)</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="legacy-scaling-and-distribution.html">Legacy Scaling and Distribution</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="introduction-to-scaling-and-distribution.html">Introduction to Scaling and Distribution</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="distributed-search-with-index-sharding.html">Distributed Search with Index Sharding</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="index-replication.html">Index Replication</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="combining-distribution-and-replication.html">Combining Distribution and Replication</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="merging-indexes.html">Merging Indexes</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="client-apis.html">Client APIs</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="introduction-to-client-apis.html">Introduction to Client APIs</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="choosing-an-output-format.html">Choosing an Output Format</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="client-api-lineup.html">Client API Lineup</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-javascript.html">Using JavaScript</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-python.html">Using Python</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-solrj.html">Using SolrJ</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-solr-from-ruby.html">Using Solr From Ruby</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="major-changes-from-solr-5-to-solr-6.html">Major Changes from Solr 5 to Solr 6</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="upgrading-a-solr-cluster.html">Upgrading a Solr Cluster</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="indexupgrader-tool.html">IndexUpgrader Tool</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="further-assistance.html">Further Assistance</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="solr-glossary.html">Solr Glossary</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="errata.html">Errata</a>
    
  </li>
  
</ul>


<!-- set the 'active' class on the current page and ancestors -->
<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("#mysidebar a[href='result-grouping.html']").parents('li').toggleClass("active", true);</script>
<!-- set the 'current' class on the current page and 'current-tree' on the current page + it's ancestors -->
<!-- this can let us do css highlighting of the current page in the sidebar even if/when the user clicks around in the sidebar causing other sidebar elements to be 'active' -->
<script>
  $("#mysidebar a[href='result-grouping.html']").parent('li').toggleClass("current", true);
  $("#mysidebar a[href='result-grouping.html']").parents('li').toggleClass("current-tree", true);
</script>

    </div>
    <!-- Content Column -->
    <div class="col-md-9">
      <div class="post-header">
   <h1 class="post-title-main">Result Grouping</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 2, listType: 'ul', showSpeed: 0, headers: 'h2,h3' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc"></div>

    

<div id="main-content">
  <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Result Grouping groups documents with a common field value into groups and returns the top documents for each group. For example, if you searched for "DVD" on an electronic retailer&#8217;s e-commerce site, you might be returned three categories such as "TV and Video," "Movies," and "Computers," with three results per category. In this case, the query term "DVD" appeared in all three categories, so Solr groups them together in order to increase relevancy for the user.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Prefer Collapse &amp; Expand instead</div>
<div class="paragraph">
<p>Solr&#8217;s <a href="collapse-and-expand-results.html#collapse-and-expand-results">Collapse and Expand</a> feature is newer and mostly overlaps with Result Grouping. There are features unique to both, and they have different performance characteristics. That said, in most cases Collapse and Expand is preferable to Result Grouping.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Result Grouping is separate from <a href="faceting.html#faceting">Faceting</a>. Though it is conceptually similar, faceting returns all relevant results and allows the user to refine the results based on the facet category. For example, if you search for "shoes" on a footwear retailer&#8217;s e-commerce site, Solr would return all results for that query term, along with selectable facets such as "size," "color," "brand," and so on.</p>
</div>
<div class="paragraph">
<p>You can however combine grouping with faceting. Grouped faceting supports <code>facet.field</code> and <code>facet.range</code> but currently doesn&#8217;t support date and pivot faceting. The facet counts are computed based on the first <code>group.field</code> parameter, and other <code>group.field</code> parameters are ignored.</p>
</div>
<div class="paragraph">
<p>Grouped faceting differs from non grouped facets (sum of all facets) == (total of products with that property) as shown in the following example:</p>
</div>
<div class="paragraph">
<p>Object 1</p>
</div>
<div class="ulist">
<ul>
<li>
<p>name: Phaser 4620a</p>
</li>
<li>
<p>ppm: 62</p>
</li>
<li>
<p>product_range: 6</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Object 2</p>
</div>
<div class="ulist">
<ul>
<li>
<p>name: Phaser 4620i</p>
</li>
<li>
<p>ppm: 65</p>
</li>
<li>
<p>product_range: 6</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Object 3</p>
</div>
<div class="ulist">
<ul>
<li>
<p>name: ML6512</p>
</li>
<li>
<p>ppm: 62</p>
</li>
<li>
<p>product_range: 7</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you ask Solr to group these documents by "product_range", then the total amount of groups is 2, but the facets for ppm are 2 for 62 and 1 for 65.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ResultGrouping-RequestParameters">Request Parameters</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Result Grouping takes the following request parameters. Any number of these request parameters can be included in a single request:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 34%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">group</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, query results will be grouped.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">group.field</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the field by which to group results. The field must be single-valued, and either be indexed or a field type that has a value source and works in a function query, such as <code>ExternalFileField</code>. It must also be a string-based field, such as <code>StrField</code> or <code>TextField</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">group.func</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">query</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Group based on the unique values of a function query.</p>
</div>
<div class="paragraph">
<p><strong>NOTE:</strong> This option does not work with <a href="#ResultGrouping-DistributedResultGroupingCaveats">distributed searches</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">group.query</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">query</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return a single group of documents that match the given query.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">rows</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of groups to return. The default value is 10.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">start</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies an initial offset for the list of groups.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">group.limit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the number of results to return for each group. The default value is 1.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">group.offset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies an initial offset for the document list of each group.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sort</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sortspec</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies how Solr sorts the groups relative to each other. For example, <code>sort=popularity desc</code> will cause the groups to be sorted according to the highest popularity document in each group. The default value is <code>score desc</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">group.sort</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sortspec</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies how Solr sorts documents within each group. The default behavior if <code>group.sort</code> is not specified is to use the same effective value as the <code>sort</code> parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">group.format</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">grouped/simple</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this parameter is set to <code>simple</code>, the grouped documents are presented in a single flat list, and the <code>start</code> and <code>rows</code> parameters affect the numbers of documents instead of groups.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">group.main</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, the result of the first field grouping command is used as the main result list in the response, using <code>group.format=simple</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">group.ngroups</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>If true, Solr includes the number of groups that have matched the query in the results. The default value is false.</p>
</div>
<div class="paragraph">
<p>See below for <a href="#ResultGrouping-DistributedResultGroupingCaveats">Distributed Result Grouping Caveats</a> when using sharded indexes</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">group.truncate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, facet counts are based on the most relevant document of each group matching the query. The default value is false.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">group.facet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Determines whether to compute grouped facets for the field facets specified in facet.field parameters. Grouped facets are computed based on the first specified group. As with normal field faceting, fields shouldn&#8217;t be tokenized (otherwise counts are computed for each token). Grouped faceting supports single and multivalued fields. Default is false.</p>
</div>
<div class="paragraph">
<p><strong>Warning</strong>: There can be a heavy performance cost to this option.</p>
</div>
<div class="paragraph">
<p>See below for <a href="#ResultGrouping-DistributedResultGroupingCaveats">Distributed Result Grouping Caveats</a> when using sharded indexes</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">group.cache.percent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer between 0 and 100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Setting this parameter to a number greater than 0 enables caching for result grouping. Result Grouping executes two searches; this option caches the second search. The default value is 0. Testing has shown that group caching only improves search time with Boolean, wildcard, and fuzzy queries. For simple queries like term or "match all" queries, group caching degrades performance.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Any number of group commands (<code>group.field</code>, <code>group.func</code>, <code>group.query</code>) may be specified in a single request.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ResultGrouping-Examples">Examples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All of the following sample queries work with Solr&#8217;s &#8220;bin/solr -e techproducts&#8221; example.</p>
</div>
<div class="sect2">
<h3 id="ResultGrouping-GroupingResultsbyField">Grouping Results by Field</h3>
<div class="paragraph">
<p>In this example, we will group results based on the <code>manu_exact</code> field, which specifies the manufacturer of the items in the sample dataset.</p>
</div>
<div class="paragraph">
<p><code><a href="http://localhost:8983/solr/techproducts/select?wt=json&amp;indent=true&amp;fl=id,name&amp;q=solr+memory&amp;group=true&amp;group.field=manu_exact" class="bare">http://localhost:8983/solr/techproducts/select?wt=json&amp;indent=true&amp;fl=id,name&amp;q=solr+memory&amp;group=true&amp;group.field=manu_exact</a></code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span style="color: #666666">{</span>
<span style="color: #666666">...</span>
<span style="color: #BA2121">&quot;grouped&quot;</span><span style="color: #666666">:{</span>
  <span style="color: #BA2121">&quot;manu_exact&quot;</span><span style="color: #666666">:{</span>
    <span style="color: #BA2121">&quot;matches&quot;</span><span style="color: #666666">:6,</span>
    <span style="color: #BA2121">&quot;groups&quot;</span><span style="color: #666666">:[{</span>
        <span style="color: #BA2121">&quot;groupValue&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;Apache Software Foundation&quot;</span><span style="color: #666666">,</span>
        <span style="color: #BA2121">&quot;doclist&quot;</span><span style="color: #666666">:{</span><span style="color: #BA2121">&quot;numFound&quot;</span><span style="color: #666666">:1,</span><span style="color: #BA2121">&quot;start&quot;</span><span style="color: #666666">:0,</span><span style="color: #BA2121">&quot;docs&quot;</span><span style="color: #666666">:[</span>
            <span style="color: #666666">{</span>
              <span style="color: #BA2121">&quot;id&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;SOLR1000&quot;</span><span style="color: #666666">,</span>
              <span style="color: #BA2121">&quot;name&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;Solr, the Enterprise Search Server&quot;</span><span style="color: #666666">}]</span>
        <span style="color: #666666">}},</span>
      <span style="color: #666666">{</span>
        <span style="color: #BA2121">&quot;groupValue&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;Corsair Microsystems Inc.&quot;</span><span style="color: #666666">,</span>
        <span style="color: #BA2121">&quot;doclist&quot;</span><span style="color: #666666">:{</span><span style="color: #BA2121">&quot;numFound&quot;</span><span style="color: #666666">:2,</span><span style="color: #BA2121">&quot;start&quot;</span><span style="color: #666666">:0,</span><span style="color: #BA2121">&quot;docs&quot;</span><span style="color: #666666">:[</span>
            <span style="color: #666666">{</span>
              <span style="color: #BA2121">&quot;id&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;VS1GB400C3&quot;</span><span style="color: #666666">,</span>
              <span style="color: #BA2121">&quot;name&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;CORSAIR ValueSelect 1GB 184-Pin DDR SDRAM Unbuffered DDR 400 (PC 3200) System Memory - Retail&quot;</span><span style="color: #666666">}]</span>
        <span style="color: #666666">}},</span>
      <span style="color: #666666">{</span>
        <span style="color: #BA2121">&quot;groupValue&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;A-DATA Technology Inc.&quot;</span><span style="color: #666666">,</span>
        <span style="color: #BA2121">&quot;doclist&quot;</span><span style="color: #666666">:{</span><span style="color: #BA2121">&quot;numFound&quot;</span><span style="color: #666666">:1,</span><span style="color: #BA2121">&quot;start&quot;</span><span style="color: #666666">:0,</span><span style="color: #BA2121">&quot;docs&quot;</span><span style="color: #666666">:[</span>
            <span style="color: #666666">{</span>
              <span style="color: #BA2121">&quot;id&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;VDBDB1A16&quot;</span><span style="color: #666666">,</span>
              <span style="color: #BA2121">&quot;name&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;A-DATA V-Series 1GB 184-Pin DDR SDRAM Unbuffered DDR 400 (PC 3200) System Memory - OEM&quot;</span><span style="color: #666666">}]</span>
        <span style="color: #666666">}},</span>
      <span style="color: #666666">{</span>
        <span style="color: #BA2121">&quot;groupValue&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;Canon Inc.&quot;</span><span style="color: #666666">,</span>
        <span style="color: #BA2121">&quot;doclist&quot;</span><span style="color: #666666">:{</span><span style="color: #BA2121">&quot;numFound&quot;</span><span style="color: #666666">:1,</span><span style="color: #BA2121">&quot;start&quot;</span><span style="color: #666666">:0,</span><span style="color: #BA2121">&quot;docs&quot;</span><span style="color: #666666">:[</span>
            <span style="color: #666666">{</span>
              <span style="color: #BA2121">&quot;id&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;0579B002&quot;</span><span style="color: #666666">,</span>
              <span style="color: #BA2121">&quot;name&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;Canon PIXMA MP500 All-In-One Photo Printer&quot;</span><span style="color: #666666">}]</span>
        <span style="color: #666666">}},</span>
      <span style="color: #666666">{</span>
        <span style="color: #BA2121">&quot;groupValue&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;ASUS Computer Inc.&quot;</span><span style="color: #666666">,</span>
        <span style="color: #BA2121">&quot;doclist&quot;</span><span style="color: #666666">:{</span><span style="color: #BA2121">&quot;numFound&quot;</span><span style="color: #666666">:1,</span><span style="color: #BA2121">&quot;start&quot;</span><span style="color: #666666">:0,</span><span style="color: #BA2121">&quot;docs&quot;</span><span style="color: #666666">:[</span>
            <span style="color: #666666">{</span>
              <span style="color: #BA2121">&quot;id&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;EN7800GTX/2DHTV/256M&quot;</span><span style="color: #666666">,</span>
              <span style="color: #BA2121">&quot;name&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;ASUS Extreme N7800GTX/2DHTV (256 MB)&quot;</span><span style="color: #666666">}]</span>
        <span style="color: #666666">}</span>
      <span style="color: #666666">}</span>
    <span style="color: #666666">]</span>
  <span style="color: #666666">}</span>
<span style="color: #666666">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The response indicates that there are six total matches for our query. For each of the five unique values of <code>group.field</code>, Solr returns a <code>docList</code> for that <code>groupValue</code> such that the <code>numFound</code> indicates the total number of documents in that group, and the top documents are returned according to the implicit default <code>group.limit=1</code> and <code>group.sort=score desc</code> parameters. The resulting groups are then sorted by the score of the top document within each group based on the implicit <code>sort=score desc</code>, and the number of groups returned is limited to the implicit <code>rows=10</code>.</p>
</div>
<div class="paragraph">
<p>We can run the same query with the request parameter <code>group.main=true</code>. This will format the results as a single flat document list. This flat format does not include as much information as the normal result grouping query results  notably the <code>numFound</code> in each group  but it may be easier for existing Solr clients to parse.</p>
</div>
<div class="paragraph">
<p><code><a href="http://localhost:8983/solr/techproducts/select?wt=json&amp;indent=true&amp;fl=id,name,manufacturer&amp;q=solr+memory&amp;group=true&amp;group.field=manu_exact&amp;group.main=true" class="bare">http://localhost:8983/solr/techproducts/select?wt=json&amp;indent=true&amp;fl=id,name,manufacturer&amp;q=solr+memory&amp;group=true&amp;group.field=manu_exact&amp;group.main=true</a></code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span style="color: #666666">{</span>
  <span style="color: #BA2121">&quot;responseHeader&quot;</span><span style="color: #666666">:{</span>
    <span style="color: #BA2121">&quot;status&quot;</span><span style="color: #666666">:0,</span>
    <span style="color: #BA2121">&quot;QTime&quot;</span><span style="color: #666666">:1,</span>
    <span style="color: #BA2121">&quot;params&quot;</span><span style="color: #666666">:{</span>
      <span style="color: #BA2121">&quot;fl&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;id,name,manufacturer&quot;</span><span style="color: #666666">,</span>
      <span style="color: #BA2121">&quot;indent&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;true&quot;</span><span style="color: #666666">,</span>
      <span style="color: #BA2121">&quot;q&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;solr memory&quot;</span><span style="color: #666666">,</span>
      <span style="color: #BA2121">&quot;group.field&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;manu_exact&quot;</span><span style="color: #666666">,</span>
      <span style="color: #BA2121">&quot;group.main&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;true&quot;</span><span style="color: #666666">,</span>
      <span style="color: #BA2121">&quot;group&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;true&quot;</span><span style="color: #666666">,</span>
      <span style="color: #BA2121">&quot;wt&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;json&quot;</span><span style="color: #666666">}},</span>
  <span style="color: #BA2121">&quot;grouped&quot;</span><span style="color: #666666">:{},</span>
  <span style="color: #BA2121">&quot;response&quot;</span><span style="color: #666666">:{</span><span style="color: #BA2121">&quot;numFound&quot;</span><span style="color: #666666">:6,</span><span style="color: #BA2121">&quot;start&quot;</span><span style="color: #666666">:0,</span><span style="color: #BA2121">&quot;docs&quot;</span><span style="color: #666666">:[</span>
      <span style="color: #666666">{</span>
        <span style="color: #BA2121">&quot;id&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;SOLR1000&quot;</span><span style="color: #666666">,</span>
        <span style="color: #BA2121">&quot;name&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;Solr, the Enterprise Search Server&quot;</span><span style="color: #666666">},</span>
      <span style="color: #666666">{</span>
        <span style="color: #BA2121">&quot;id&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;VS1GB400C3&quot;</span><span style="color: #666666">,</span>
        <span style="color: #BA2121">&quot;name&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;CORSAIR ValueSelect 1GB 184-Pin DDR SDRAM Unbuffered DDR 400 (PC 3200) System Memory - Retail&quot;</span><span style="color: #666666">},</span>
      <span style="color: #666666">{</span>
        <span style="color: #BA2121">&quot;id&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;VDBDB1A16&quot;</span><span style="color: #666666">,</span>
        <span style="color: #BA2121">&quot;name&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;A-DATA V-Series 1GB 184-Pin DDR SDRAM Unbuffered DDR 400 (PC 3200) System Memory - OEM&quot;</span><span style="color: #666666">},</span>
      <span style="color: #666666">{</span>
        <span style="color: #BA2121">&quot;id&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;0579B002&quot;</span><span style="color: #666666">,</span>
        <span style="color: #BA2121">&quot;name&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;Canon PIXMA MP500 All-In-One Photo Printer&quot;</span><span style="color: #666666">},</span>
      <span style="color: #666666">{</span>
        <span style="color: #BA2121">&quot;id&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;EN7800GTX/2DHTV/256M&quot;</span><span style="color: #666666">,</span>
        <span style="color: #BA2121">&quot;name&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;ASUS Extreme N7800GTX/2DHTV (256 MB)&quot;</span><span style="color: #666666">}]</span>
  <span style="color: #666666">}</span>
<span style="color: #666666">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ResultGrouping-GroupingbyQuery">Grouping by Query</h3>
<div class="paragraph">
<p>In this example, we will use the <code>group.query</code> parameter to find the top three results for "memory" in two different price ranges: 0.00 to 99.99, and over 100.</p>
</div>
<div class="paragraph">
<p><a href="http://localhost:8983/solr/techproducts/select?wt=json&amp;indent=true&amp;fl=name,price&amp;q=memory&amp;group=true&amp;group.query=price:%5B0+TO+99.99%5D&amp;group.query=price:%5B100+TO+" class="bare">http://localhost:8983/solr/techproducts/select?wt=json&amp;indent=true&amp;fl=name,price&amp;q=memory&amp;group=true&amp;group.query=price:%5B0+TO+99.99%5D&amp;group.query=price:%5B100+TO+</a><strong>%5D&amp;group.limit=3[<code><a href="http://localhost:8983/solr/techproducts/select?wt=json&amp;indent=true&amp;fl=name,price&amp;q=memory&amp;group=true&amp;group.query=price:">0+TO+99.99</a>&amp;group.query=price:[100+TO+</strong>]&amp;group.limit=3</code>]</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span style="color: #666666">{</span>
  <span style="color: #BA2121">&quot;responseHeader&quot;</span><span style="color: #666666">:{</span>
    <span style="color: #BA2121">&quot;status&quot;</span><span style="color: #666666">:0,</span>
    <span style="color: #BA2121">&quot;QTime&quot;</span><span style="color: #666666">:42,</span>
    <span style="color: #BA2121">&quot;params&quot;</span><span style="color: #666666">:{</span>
      <span style="color: #BA2121">&quot;fl&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;name,price&quot;</span><span style="color: #666666">,</span>
      <span style="color: #BA2121">&quot;indent&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;true&quot;</span><span style="color: #666666">,</span>
      <span style="color: #BA2121">&quot;q&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;memory&quot;</span><span style="color: #666666">,</span>
      <span style="color: #BA2121">&quot;group.limit&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;3&quot;</span><span style="color: #666666">,</span>
      <span style="color: #BA2121">&quot;group.query&quot;</span><span style="color: #666666">:[</span><span style="color: #BA2121">&quot;price:[0 TO 99.99]&quot;</span><span style="color: #666666">,</span>
      <span style="color: #BA2121">&quot;price:[100 TO *]&quot;</span><span style="color: #666666">],</span>
      <span style="color: #BA2121">&quot;group&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;true&quot;</span><span style="color: #666666">,</span>
      <span style="color: #BA2121">&quot;wt&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;json&quot;</span><span style="color: #666666">}},</span>
  <span style="color: #BA2121">&quot;grouped&quot;</span><span style="color: #666666">:{</span>
    <span style="color: #BA2121">&quot;price:[0 TO 99.99]&quot;</span><span style="color: #666666">:{</span>
      <span style="color: #BA2121">&quot;matches&quot;</span><span style="color: #666666">:5,</span>
      <span style="color: #BA2121">&quot;doclist&quot;</span><span style="color: #666666">:{</span><span style="color: #BA2121">&quot;numFound&quot;</span><span style="color: #666666">:1,</span><span style="color: #BA2121">&quot;start&quot;</span><span style="color: #666666">:0,</span><span style="color: #BA2121">&quot;docs&quot;</span><span style="color: #666666">:[</span>
          <span style="color: #666666">{</span>
            <span style="color: #BA2121">&quot;name&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;CORSAIR ValueSelect 1GB 184-Pin DDR SDRAM Unbuffered DDR 400 (PC 3200) System Memory - Retail&quot;</span><span style="color: #666666">,</span>
            <span style="color: #BA2121">&quot;price&quot;</span><span style="color: #666666">:74.99}]</span>
      <span style="color: #666666">}},</span>
    <span style="color: #BA2121">&quot;price:[100 TO *]&quot;</span><span style="color: #666666">:{</span>
      <span style="color: #BA2121">&quot;matches&quot;</span><span style="color: #666666">:5,</span>
      <span style="color: #BA2121">&quot;doclist&quot;</span><span style="color: #666666">:{</span><span style="color: #BA2121">&quot;numFound&quot;</span><span style="color: #666666">:3,</span><span style="color: #BA2121">&quot;start&quot;</span><span style="color: #666666">:0,</span><span style="color: #BA2121">&quot;docs&quot;</span><span style="color: #666666">:[</span>
          <span style="color: #666666">{</span>
            <span style="color: #BA2121">&quot;name&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;CORSAIR  XMS 2GB (2 x 1GB) 184-Pin DDR SDRAM Unbuffered DDR 400 (PC 3200) Dual Channel Kit System Memory - Retail&quot;</span><span style="color: #666666">,</span>
            <span style="color: #BA2121">&quot;price&quot;</span><span style="color: #666666">:185.0},</span>
          <span style="color: #666666">{</span>
            <span style="color: #BA2121">&quot;name&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;Canon PIXMA MP500 All-In-One Photo Printer&quot;</span><span style="color: #666666">,</span>
            <span style="color: #BA2121">&quot;price&quot;</span><span style="color: #666666">:179.99},</span>
          <span style="color: #666666">{</span>
            <span style="color: #BA2121">&quot;name&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;ASUS Extreme N7800GTX/2DHTV (256 MB)&quot;</span><span style="color: #666666">,</span>
            <span style="color: #BA2121">&quot;price&quot;</span><span style="color: #666666">:479.95}]</span>
      <span style="color: #666666">}</span>
    <span style="color: #666666">}</span>
  <span style="color: #666666">}</span>
<span style="color: #666666">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, Solr found five matches for "memory," but only returns four results grouped by price. This is because one result for "memory" did not have a price assigned to it.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ResultGrouping-DistributedResultGroupingCaveats">Distributed Result Grouping Caveats</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Grouping is supported for <a href="solrcloud.html#solrcloud">distributed searches</a>, with some caveats:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Currently <code>group.func</code> is is not supported in any distributed searches</p>
</li>
<li>
<p><code>group.ngroups</code> and <code>group.facet</code> require that all documents in each group must be co-located on the same shard in order for accurate counts to be returned. <a href="shards-and-indexing-data-in-solrcloud.html#shards-and-indexing-data-in-solrcloud">Document routing via composite keys</a> can be a useful solution in many situations.</p>
</li>
</ul>
</div>
</div>
</div>
</div>

<!-- Adds tags, if any -->
    <div class="tags">
        
    </div>

<!-- Adds nav links on each page -->
    
    
    <div class="scrollnav">
      
      <a class="btn btn-primary prev" href="collapse-and-expand-results.html">Collapse and Expand Results</a>
      
      
      <a class="btn btn-primary next" href="result-clustering.html">Result Clustering</a>
      
    </div>
    

</div>

<!-- Adds comments from Apache's Comment system -->

<div id="comments_thread">
</div>
<script type="text/javascript" src="https://comments.apache.org/show_comments.lua?site=solrcwiki&style=https://home.apache.org/~ctargett/RefGuidePOC/jekyll/css/comments.css&page=result-grouping" async="true">
</script>
<noscript>
<iframe width="100%" height="500" src="https://comments.apache.org/iframe.lua?site=solrcwiki&style=https://home.apache.org/~ctargett/RefGuidePOC/jekyll/css/comments.css&page=result-grouping"></iframe>
</noscript>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2017 Apache Software Foundation. All rights reserved. <br />
 Site last generated: 2017-04-26 <br />
<p><img src="solr-sunOnly-small.png" alt="Apache Solr"/></p>
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
  </div>
  <!-- /.container -->
</div>

</body>

</html>
