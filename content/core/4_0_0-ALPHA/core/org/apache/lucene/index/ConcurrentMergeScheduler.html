<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_01) on Mon Jul 02 08:51:00 EDT 2012 -->
<meta http-equiv="Content-Type" content="text/html" charset="utf-8">
<title>ConcurrentMergeScheduler (Lucene 4.0.0-ALPHA API)</title>
<meta name="date" content="2012-07-02">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ConcurrentMergeScheduler (Lucene 4.0.0-ALPHA API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ConcurrentMergeScheduler.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/lucene/index/CompositeReaderContext.html" title="class in org.apache.lucene.index"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.MergeThread.html" title="class in org.apache.lucene.index"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/lucene/index/ConcurrentMergeScheduler.html" target="_top">Frames</a></li>
<li><a href="ConcurrentMergeScheduler.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.lucene.index</div>
<h2 title="Class ConcurrentMergeScheduler" class="title">Class ConcurrentMergeScheduler</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../org/apache/lucene/index/MergeScheduler.html" title="class in org.apache.lucene.index">org.apache.lucene.index.MergeScheduler</a></li>
<li>
<ul class="inheritance">
<li>org.apache.lucene.index.ConcurrentMergeScheduler</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">ConcurrentMergeScheduler</span>
extends <a href="../../../../org/apache/lucene/index/MergeScheduler.html" title="class in org.apache.lucene.index">MergeScheduler</a></pre>
<div class="block">A <a href="../../../../org/apache/lucene/index/MergeScheduler.html" title="class in org.apache.lucene.index"><code>MergeScheduler</code></a> that runs each merge using a
  separate thread.

  <p>Specify the max number of threads that may run at
  once with <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#setMaxThreadCount(int)"><code>setMaxThreadCount(int)</code></a>.</p>

  <p>Separately specify the maximum number of simultaneous
  merges with <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#setMaxMergeCount(int)"><code>setMaxMergeCount(int)</code></a>.  If the number of
  merges exceeds the max number of threads then the
  largest merges are paused until one of the smaller
  merges completes.</p>

  <p>If more than <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#getMaxMergeCount()"><code>getMaxMergeCount()</code></a> merges are
  requested then this class will forcefully throttle the
  incoming threads by pausing until one more more merges
  complete.</p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.MergeThread.html" title="class in org.apache.lucene.index">ConcurrentMergeScheduler.MergeThread</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static <a href="http://download.oracle.com/javase/6/docs/api/java/util/Comparator.html?is-external=true" title="class or interface in java.util">Comparator</a>&lt;<a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.MergeThread.html" title="class in org.apache.lucene.index">ConcurrentMergeScheduler.MergeThread</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#compareByMergeDocCount">compareByMergeDocCount</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../org/apache/lucene/store/Directory.html" title="class in org.apache.lucene.store">Directory</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#dir">dir</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#mergeThreadCount">mergeThreadCount</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="http://download.oracle.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.MergeThread.html" title="class in org.apache.lucene.index">ConcurrentMergeScheduler.MergeThread</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#mergeThreads">mergeThreads</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../org/apache/lucene/index/IndexWriter.html" title="class in org.apache.lucene.index">IndexWriter</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#writer">writer</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#ConcurrentMergeScheduler()">ConcurrentMergeScheduler</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#close()">close</a></strong>()</code>
<div class="block">Close this MergeScheduler.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#doMerge(org.apache.lucene.index.MergePolicy.OneMerge)">doMerge</a></strong>(<a href="../../../../org/apache/lucene/index/MergePolicy.OneMerge.html" title="class in org.apache.lucene.index">MergePolicy.OneMerge</a>&nbsp;merge)</code>
<div class="block">Does the actual merge, by calling <a href="../../../../org/apache/lucene/index/IndexWriter.html#merge(org.apache.lucene.index.MergePolicy.OneMerge)"><code>IndexWriter.merge(org.apache.lucene.index.MergePolicy.OneMerge)</code></a></div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#getMaxMergeCount()">getMaxMergeCount</a></strong>()</code>
<div class="block">See <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#setMaxMergeCount(int)"><code>setMaxMergeCount(int)</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#getMaxThreadCount()">getMaxThreadCount</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.MergeThread.html" title="class in org.apache.lucene.index">ConcurrentMergeScheduler.MergeThread</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#getMergeThread(org.apache.lucene.index.IndexWriter, org.apache.lucene.index.MergePolicy.OneMerge)">getMergeThread</a></strong>(<a href="../../../../org/apache/lucene/index/IndexWriter.html" title="class in org.apache.lucene.index">IndexWriter</a>&nbsp;writer,
              <a href="../../../../org/apache/lucene/index/MergePolicy.OneMerge.html" title="class in org.apache.lucene.index">MergePolicy.OneMerge</a>&nbsp;merge)</code>
<div class="block">Create and return a new MergeThread</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#getMergeThreadPriority()">getMergeThreadPriority</a></strong>()</code>
<div class="block">Return the priority that merge threads run at.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#handleMergeException(java.lang.Throwable)">handleMergeException</a></strong>(<a href="http://download.oracle.com/javase/6/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a>&nbsp;exc)</code>
<div class="block">Called when an exception is hit in a background merge
  thread</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#merge(org.apache.lucene.index.IndexWriter)">merge</a></strong>(<a href="../../../../org/apache/lucene/index/IndexWriter.html" title="class in org.apache.lucene.index">IndexWriter</a>&nbsp;writer)</code>
<div class="block">Run the merges provided by <a href="../../../../org/apache/lucene/index/IndexWriter.html#getNextMerge()"><code>IndexWriter.getNextMerge()</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#mergeThreadCount()">mergeThreadCount</a></strong>()</code>
<div class="block">Returns the number of merge threads that are alive.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#message(java.lang.String)">message</a></strong>(<a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;message)</code>
<div class="block">Outputs the given message - this method assumes <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#verbose()"><code>verbose()</code></a> was
 called and returned true.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#setMaxMergeCount(int)">setMaxMergeCount</a></strong>(int&nbsp;count)</code>
<div class="block">Sets the max # simultaneous merges that are allowed.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#setMaxThreadCount(int)">setMaxThreadCount</a></strong>(int&nbsp;count)</code>
<div class="block">Sets the max # simultaneous merge threads that should
  be running at once.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#setMergeThreadPriority(int)">setMergeThreadPriority</a></strong>(int&nbsp;pri)</code>
<div class="block">Set the base priority that merge threads run at.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#sync()">sync</a></strong>()</code>
<div class="block">Wait for any running merge threads to finish</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#updateMergeThreads()">updateMergeThreads</a></strong>()</code>
<div class="block">Called whenever the running merges have changed, to pause & unpause
 threads.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#verbose()">verbose</a></strong>()</code>
<div class="block">Returns true if verbosing is enabled.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="mergeThreads">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mergeThreads</h4>
<pre>protected&nbsp;<a href="http://download.oracle.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.MergeThread.html" title="class in org.apache.lucene.index">ConcurrentMergeScheduler.MergeThread</a>&gt; mergeThreads</pre>
</li>
</ul>
<a name="dir">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dir</h4>
<pre>protected&nbsp;<a href="../../../../org/apache/lucene/store/Directory.html" title="class in org.apache.lucene.store">Directory</a> dir</pre>
</li>
</ul>
<a name="writer">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writer</h4>
<pre>protected&nbsp;<a href="../../../../org/apache/lucene/index/IndexWriter.html" title="class in org.apache.lucene.index">IndexWriter</a> writer</pre>
</li>
</ul>
<a name="mergeThreadCount">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mergeThreadCount</h4>
<pre>protected&nbsp;int mergeThreadCount</pre>
</li>
</ul>
<a name="compareByMergeDocCount">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>compareByMergeDocCount</h4>
<pre>protected static final&nbsp;<a href="http://download.oracle.com/javase/6/docs/api/java/util/Comparator.html?is-external=true" title="class or interface in java.util">Comparator</a>&lt;<a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.MergeThread.html" title="class in org.apache.lucene.index">ConcurrentMergeScheduler.MergeThread</a>&gt; compareByMergeDocCount</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ConcurrentMergeScheduler()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ConcurrentMergeScheduler</h4>
<pre>public&nbsp;ConcurrentMergeScheduler()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setMaxThreadCount(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMaxThreadCount</h4>
<pre>public&nbsp;void&nbsp;setMaxThreadCount(int&nbsp;count)</pre>
<div class="block">Sets the max # simultaneous merge threads that should
  be running at once.  This must be <= <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#setMaxMergeCount(int)"><code>setMaxMergeCount(int)</code></a>.</div>
</li>
</ul>
<a name="getMaxThreadCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxThreadCount</h4>
<pre>public&nbsp;int&nbsp;getMaxThreadCount()</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#setMaxThreadCount(int)"><code>setMaxThreadCount(int)</code></a></dd></dl>
</li>
</ul>
<a name="setMaxMergeCount(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMaxMergeCount</h4>
<pre>public&nbsp;void&nbsp;setMaxMergeCount(int&nbsp;count)</pre>
<div class="block">Sets the max # simultaneous merges that are allowed.
  If a merge is necessary yet we already have this many
  threads running, the incoming thread (that is calling
  add/updateDocument) will block until a merge thread
  has completed.  Note that we will only run the
  smallest <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#setMaxThreadCount(int)"><code>setMaxThreadCount(int)</code></a> merges at a time.</div>
</li>
</ul>
<a name="getMaxMergeCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxMergeCount</h4>
<pre>public&nbsp;int&nbsp;getMaxMergeCount()</pre>
<div class="block">See <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#setMaxMergeCount(int)"><code>setMaxMergeCount(int)</code></a>.</div>
</li>
</ul>
<a name="getMergeThreadPriority()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMergeThreadPriority</h4>
<pre>public&nbsp;int&nbsp;getMergeThreadPriority()</pre>
<div class="block">Return the priority that merge threads run at.  By
  default the priority is 1 plus the priority of (ie,
  slightly higher priority than) the first thread that
  calls merge.</div>
</li>
</ul>
<a name="setMergeThreadPriority(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMergeThreadPriority</h4>
<pre>public&nbsp;void&nbsp;setMergeThreadPriority(int&nbsp;pri)</pre>
<div class="block">Set the base priority that merge threads run at.
  Note that CMS may increase priority of some merge
  threads beyond this base priority.  It's best not to
  set this any higher than
  Thread.MAX_PRIORITY-maxThreadCount, so that CMS has
  room to set relative priority among threads.</div>
</li>
</ul>
<a name="updateMergeThreads()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateMergeThreads</h4>
<pre>protected&nbsp;void&nbsp;updateMergeThreads()</pre>
<div class="block">Called whenever the running merges have changed, to pause & unpause
 threads. This method sorts the merge threads by their merge size in
 descending order and then pauses/unpauses threads from first to last --
 that way, smaller merges are guaranteed to run before larger ones.</div>
</li>
</ul>
<a name="verbose()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verbose</h4>
<pre>protected&nbsp;boolean&nbsp;verbose()</pre>
<div class="block">Returns true if verbosing is enabled. This method is usually used in
 conjunction with <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#message(java.lang.String)"><code>message(String)</code></a>, like that:
 
 <pre>
 if (verbose()) {
   message(&quot;your message&quot;);
 }
 </pre></div>
</li>
</ul>
<a name="message(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>message</h4>
<pre>protected&nbsp;void&nbsp;message(<a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;message)</pre>
<div class="block">Outputs the given message - this method assumes <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#verbose()"><code>verbose()</code></a> was
 called and returned true.</div>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../org/apache/lucene/index/MergeScheduler.html#close()">MergeScheduler</a></code></strong></div>
<div class="block">Close this MergeScheduler.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/lucene/index/MergeScheduler.html#close()">close</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/apache/lucene/index/MergeScheduler.html" title="class in org.apache.lucene.index">MergeScheduler</a></code></dd>
</dl>
</li>
</ul>
<a name="sync()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sync</h4>
<pre>public&nbsp;void&nbsp;sync()</pre>
<div class="block">Wait for any running merge threads to finish</div>
</li>
</ul>
<a name="mergeThreadCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mergeThreadCount</h4>
<pre>protected&nbsp;int&nbsp;mergeThreadCount()</pre>
<div class="block">Returns the number of merge threads that are alive. Note that this number
 is &le; <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#mergeThreads"><code>mergeThreads</code></a> size.</div>
</li>
</ul>
<a name="merge(org.apache.lucene.index.IndexWriter)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>merge</h4>
<pre>public&nbsp;void&nbsp;merge(<a href="../../../../org/apache/lucene/index/IndexWriter.html" title="class in org.apache.lucene.index">IndexWriter</a>&nbsp;writer)
           throws <a href="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../org/apache/lucene/index/MergeScheduler.html#merge(org.apache.lucene.index.IndexWriter)">MergeScheduler</a></code></strong></div>
<div class="block">Run the merges provided by <a href="../../../../org/apache/lucene/index/IndexWriter.html#getNextMerge()"><code>IndexWriter.getNextMerge()</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/lucene/index/MergeScheduler.html#merge(org.apache.lucene.index.IndexWriter)">merge</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/apache/lucene/index/MergeScheduler.html" title="class in org.apache.lucene.index">MergeScheduler</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="doMerge(org.apache.lucene.index.MergePolicy.OneMerge)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doMerge</h4>
<pre>protected&nbsp;void&nbsp;doMerge(<a href="../../../../org/apache/lucene/index/MergePolicy.OneMerge.html" title="class in org.apache.lucene.index">MergePolicy.OneMerge</a>&nbsp;merge)
                throws <a href="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Does the actual merge, by calling <a href="../../../../org/apache/lucene/index/IndexWriter.html#merge(org.apache.lucene.index.MergePolicy.OneMerge)"><code>IndexWriter.merge(org.apache.lucene.index.MergePolicy.OneMerge)</code></a></div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getMergeThread(org.apache.lucene.index.IndexWriter, org.apache.lucene.index.MergePolicy.OneMerge)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMergeThread</h4>
<pre>protected&nbsp;<a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.MergeThread.html" title="class in org.apache.lucene.index">ConcurrentMergeScheduler.MergeThread</a>&nbsp;getMergeThread(<a href="../../../../org/apache/lucene/index/IndexWriter.html" title="class in org.apache.lucene.index">IndexWriter</a>&nbsp;writer,
                                                  <a href="../../../../org/apache/lucene/index/MergePolicy.OneMerge.html" title="class in org.apache.lucene.index">MergePolicy.OneMerge</a>&nbsp;merge)
                                                       throws <a href="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Create and return a new MergeThread</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="handleMergeException(java.lang.Throwable)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>handleMergeException</h4>
<pre>protected&nbsp;void&nbsp;handleMergeException(<a href="http://download.oracle.com/javase/6/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a>&nbsp;exc)</pre>
<div class="block">Called when an exception is hit in a background merge
  thread</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ConcurrentMergeScheduler.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/lucene/index/CompositeReaderContext.html" title="class in org.apache.lucene.index"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.MergeThread.html" title="class in org.apache.lucene.index"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/lucene/index/ConcurrentMergeScheduler.html" target="_top">Frames</a></li>
<li><a href="ConcurrentMergeScheduler.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>
          <address>Copyright &copy; 2000-2012 Apache Software Foundation.  All Rights Reserved.</address>
          <script src='../../../../prettify.js' type='text/javascript'></script>
          <script type='text/javascript'>
            (function(){
              var oldonload = window.onload;
              if (typeof oldonload != 'function') {
                window.onload = prettyPrint;
              } else {
                window.onload = function() {
                  oldonload();
                  prettyPrint();
                }
              }
            })();
          </script>
        </small></p>
</body>
</html>
