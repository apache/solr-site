<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_01) on Wed Apr 11 21:46:53 EDT 2012 -->
<meta http-equiv="Content-Type" content="text/html" charset="utf-8">
<title>TaxonomyReader (Lucene 3.6.0 API)</title>
<meta name="date" content="2012-04-11">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="TaxonomyReader (Lucene 3.6.0 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TaxonomyReader.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/lucene/facet/taxonomy/InconsistentTaxonomyException.html" title="class in org.apache.lucene.facet.taxonomy"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.ChildrenArrays.html" title="interface in org.apache.lucene.facet.taxonomy"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/lucene/facet/taxonomy/TaxonomyReader.html" target="_top">Frames</a></li>
<li><a href="TaxonomyReader.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.lucene.facet.taxonomy</div>
<h2 title="Interface TaxonomyReader" class="title">Interface TaxonomyReader</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a></dd>
</dl>
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../../../org/apache/lucene/facet/taxonomy/directory/DirectoryTaxonomyReader.html" title="class in org.apache.lucene.facet.taxonomy.directory">DirectoryTaxonomyReader</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="strong">TaxonomyReader</span>
extends <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a></pre>
<div class="block">TaxonomyReader is the read-only interface with which the faceted-search
 library uses the taxonomy during search time.
 <P>
 A TaxonomyReader holds a list of categories. Each category has a serial
 number which we call an "ordinal", and a hierarchical "path" name:
 <UL>
 <LI>
 The ordinal is an integer that starts at 0 for the first category (which is
 always the root category), and grows contiguously as more categories are
 added; Note that once a category is added, it can never be deleted.
 <LI>
 The path is a CategoryPath object specifying the category's position in the
 hierarchy.
 </UL>
 <B>Notes about concurrent access to the taxonomy:</B>
 <P>
 An implementation must allow multiple readers to be active concurrently
 with a single writer. Readers follow so-called "point in time" semantics,
 i.e., a TaxonomyReader object will only see taxonomy entries which were
 available at the time it was created. What the writer writes is only
 available to (new) readers after the writer's commit() is called.
 <P>
 In faceted search, two separate indices are used: the main Lucene index,
 and the taxonomy. Because the main index refers to the categories listed
 in the taxonomy, it is important to open the taxonomy *after* opening the
 main index, and it is also necessary to reopen() the taxonomy after
 reopen()ing the main index.
 <P>
 This order is important, otherwise it would be possible for the main index
 to refer to a category which is not yet visible in the old snapshot of
 the taxonomy. Note that it is indeed fine for the the taxonomy to be opened
 after the main index - even a long time after. The reason is that once
 a category is added to the taxonomy, it can never be changed or deleted,
 so there is no danger that a "too new" taxonomy not being consistent with
 an older index.</div>
<dl><dt><span class="strong">WARNING: This API is experimental and might change in incompatible ways in the next release.</span></dt>
  <dd></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Interface and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.ChildrenArrays.html" title="interface in org.apache.lucene.facet.taxonomy">TaxonomyReader.ChildrenArrays</a></strong></code>
<div class="block">Equivalent representations of the taxonomy's parent info, 
 used internally for efficient computation of facet results: 
 "youngest child" and "oldest sibling"</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#INVALID_ORDINAL">INVALID_ORDINAL</a></strong></code>
<div class="block">Ordinals are always non-negative, so a negative ordinal can be used to
 signify an error.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#ROOT_ORDINAL">ROOT_ORDINAL</a></strong></code>
<div class="block">The root category (the category with the empty path) always has the
 ordinal 0, to which we give a name ROOT_ORDINAL.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#decRef()">decRef</a></strong>()</code>
<div class="block">Expert: decreases the refCount of this TaxonomyReader instance.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.ChildrenArrays.html" title="interface in org.apache.lucene.facet.taxonomy">TaxonomyReader.ChildrenArrays</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#getChildrenArrays()">getChildrenArrays</a></strong>()</code>
<div class="block">getChildrenArrays() returns a <a href="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.ChildrenArrays.html" title="interface in org.apache.lucene.facet.taxonomy"><code>TaxonomyReader.ChildrenArrays</code></a> object which can
 be used together to efficiently enumerate the children of any category.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#getCommitUserData()">getCommitUserData</a></strong>()</code>
<div class="block">Retrieve user committed data.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#getOrdinal(org.apache.lucene.facet.taxonomy.CategoryPath)">getOrdinal</a></strong>(<a href="../../../../../org/apache/lucene/facet/taxonomy/CategoryPath.html" title="class in org.apache.lucene.facet.taxonomy">CategoryPath</a>&nbsp;categoryPath)</code>
<div class="block">getOrdinal() returns the ordinal of the category given as a path.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#getParent(int)">getParent</a></strong>(int&nbsp;ordinal)</code>
<div class="block">getParent() returns the ordinal of the parent category of the category
 with the given ordinal.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#getParentArray()">getParentArray</a></strong>()</code>
<div class="block">getParentArray() returns an int array of size getSize() listing the
 ordinal of the parent category of each category in the taxonomy.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/lucene/facet/taxonomy/CategoryPath.html" title="class in org.apache.lucene.facet.taxonomy">CategoryPath</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#getPath(int)">getPath</a></strong>(int&nbsp;ordinal)</code>
<div class="block">getPath() returns the path name of the category with the given
 ordinal.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#getPath(int, org.apache.lucene.facet.taxonomy.CategoryPath)">getPath</a></strong>(int&nbsp;ordinal,
       <a href="../../../../../org/apache/lucene/facet/taxonomy/CategoryPath.html" title="class in org.apache.lucene.facet.taxonomy">CategoryPath</a>&nbsp;result)</code>
<div class="block">getPath() returns the path name of the category with the given
 ordinal.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#getRefCount()">getRefCount</a></strong>()</code>
<div class="block">Expert: returns the current refCount for this taxonomy reader</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#getSize()">getSize</a></strong>()</code>
<div class="block">getSize() returns the number of categories in the taxonomy.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#incRef()">incRef</a></strong>()</code>
<div class="block">Expert: increments the refCount of this TaxonomyReader instance.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#refresh()">refresh</a></strong>()</code>
<div class="block">refresh() re-reads the taxonomy information if there were any changes to
 the taxonomy since this instance was opened or last refreshed.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.io.Closeable">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;java.io.<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a></h3>
<code><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/Closeable.html?is-external=true#close()" title="class or interface in java.io">close</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="ROOT_ORDINAL">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ROOT_ORDINAL</h4>
<pre>static final&nbsp;int ROOT_ORDINAL</pre>
<div class="block">The root category (the category with the empty path) always has the
 ordinal 0, to which we give a name ROOT_ORDINAL.
 getOrdinal() of an empty path will always return ROOT_ORDINAL, and
 getCategory(ROOT_ORDINAL) will return the empty path.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#org.apache.lucene.facet.taxonomy.TaxonomyReader.ROOT_ORDINAL">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="INVALID_ORDINAL">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>INVALID_ORDINAL</h4>
<pre>static final&nbsp;int INVALID_ORDINAL</pre>
<div class="block">Ordinals are always non-negative, so a negative ordinal can be used to
 signify an error. Methods here return INVALID_ORDINAL (-1) in this case.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#org.apache.lucene.facet.taxonomy.TaxonomyReader.INVALID_ORDINAL">Constant Field Values</a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getOrdinal(org.apache.lucene.facet.taxonomy.CategoryPath)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOrdinal</h4>
<pre>int&nbsp;getOrdinal(<a href="../../../../../org/apache/lucene/facet/taxonomy/CategoryPath.html" title="class in org.apache.lucene.facet.taxonomy">CategoryPath</a>&nbsp;categoryPath)
               throws <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">getOrdinal() returns the ordinal of the category given as a path.
 The ordinal is the category's serial number, an integer which starts
 with 0 and grows as more categories are added (note that once a category
 is added, it can never be deleted).
 <P>
 If the given category wasn't found in the taxonomy, INVALID_ORDINAL is
 returned.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getPath(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPath</h4>
<pre><a href="../../../../../org/apache/lucene/facet/taxonomy/CategoryPath.html" title="class in org.apache.lucene.facet.taxonomy">CategoryPath</a>&nbsp;getPath(int&nbsp;ordinal)
                     throws <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">getPath() returns the path name of the category with the given
 ordinal. The path is returned as a new CategoryPath object - to
 reuse an existing object, use <a href="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#getPath(int, org.apache.lucene.facet.taxonomy.CategoryPath)"><code>getPath(int, CategoryPath)</code></a>.
 <P>
 A null is returned if a category with the given ordinal does not exist.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getPath(int, org.apache.lucene.facet.taxonomy.CategoryPath)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPath</h4>
<pre>boolean&nbsp;getPath(int&nbsp;ordinal,
              <a href="../../../../../org/apache/lucene/facet/taxonomy/CategoryPath.html" title="class in org.apache.lucene.facet.taxonomy">CategoryPath</a>&nbsp;result)
                throws <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">getPath() returns the path name of the category with the given
 ordinal. The path is written to the given CategoryPath object (which
 is cleared first).
 <P>
 If a category with the given ordinal does not exist, the given
 CategoryPath object is not modified, and the method returns
 <code>false</code>. Otherwise, the method returns <code>true</code>.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="refresh()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>refresh</h4>
<pre>boolean&nbsp;refresh()
                throws <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                       <a href="../../../../../org/apache/lucene/facet/taxonomy/InconsistentTaxonomyException.html" title="class in org.apache.lucene.facet.taxonomy">InconsistentTaxonomyException</a></pre>
<div class="block">refresh() re-reads the taxonomy information if there were any changes to
 the taxonomy since this instance was opened or last refreshed. Calling
 refresh() is more efficient than close()ing the old instance and opening a
 new one.
 <P>
 If there were no changes since this instance was opened or last refreshed,
 then this call does nothing. Note, however, that this is still a relatively
 slow method (as it needs to verify whether there have been any changes on
 disk to the taxonomy), so it should not be called too often needlessly. In
 faceted search, the taxonomy reader's refresh() should be called only after
 a reopen() of the main index.
 <P>
 Refreshing the taxonomy might fail in some cases, for example 
 if the taxonomy was recreated since this instance was opened or last refreshed.
 In this case an <a href="../../../../../org/apache/lucene/facet/taxonomy/InconsistentTaxonomyException.html" title="class in org.apache.lucene.facet.taxonomy"><code>InconsistentTaxonomyException</code></a> is thrown,
 suggesting that in order to obtain up-to-date taxonomy data a new
 <a href="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html" title="interface in org.apache.lucene.facet.taxonomy"><code>TaxonomyReader</code></a> should be opened. Note: This <a href="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html" title="interface in org.apache.lucene.facet.taxonomy"><code>TaxonomyReader</code></a> 
 instance remains unchanged and usable in this case, and the application can
 continue to use it, and should still <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/Closeable.html?is-external=true#close()" title="class or interface in java.io"><code>Closeable.close()</code></a> when no longer needed.  
 <P>
 It should be noted that refresh() is similar in purpose to
 IndexReader.reopen(), but the two methods behave differently. refresh()
 refreshes the existing TaxonomyReader object, rather than opening a new one
 in addition to the old one as reopen() does. The reason is that in a
 taxonomy, one can only add new categories and cannot modify or delete
 existing categories; Therefore, there is no reason to keep an old snapshot
 of the taxonomy open - refreshing the taxonomy to the newest data and using
 this new snapshots in all threads (whether new or old) is fine. This saves
 us needing to keep multiple copies of the taxonomy open in memory.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if anything has changed, false otherwise.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="../../../../../org/apache/lucene/facet/taxonomy/InconsistentTaxonomyException.html" title="class in org.apache.lucene.facet.taxonomy">InconsistentTaxonomyException</a></code></dd></dl>
</li>
</ul>
<a name="getParent(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getParent</h4>
<pre>int&nbsp;getParent(int&nbsp;ordinal)
              throws <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">getParent() returns the ordinal of the parent category of the category
 with the given ordinal.
 <P>
 When a category is specified as a path name, finding the path of its
 parent is as trivial as dropping the last component of the path.
 getParent() is functionally equivalent to calling getPath() on the
 given ordinal, dropping the last component of the path, and then calling
 getOrdinal() to get an ordinal back. However, implementations are
 expected to provide a much more efficient implementation:
 <P>
 getParent() should be a very quick method, as it is used during the
 facet aggregation process in faceted search. Implementations will most
 likely want to serve replies to this method from a pre-filled cache.
 <P>
 If the given ordinal is the ROOT_ORDINAL, an INVALID_ORDINAL is returned.
 If the given ordinal is a top-level category, the ROOT_ORDINAL is returned.
 If an invalid ordinal is given (negative or beyond the last available
 ordinal), an ArrayIndexOutOfBoundsException is thrown. However, it is
 expected that getParent will only be called for ordinals which are
 already known to be in the taxonomy.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getParentArray()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getParentArray</h4>
<pre>int[]&nbsp;getParentArray()
                     throws <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">getParentArray() returns an int array of size getSize() listing the
 ordinal of the parent category of each category in the taxonomy.
 <P>
 The caller can hold on to the array it got indefinitely - it is
 guaranteed that no-one else will modify it. The other side of the
 same coin is that the caller must treat the array it got as read-only
 and <B>not modify it</B>, because other callers might have gotten the
 same array too (and getParent() calls might be answered from the
 same array).
 <P>
 If you use getParentArray() instead of getParent(), remember that
 the array you got is (naturally) not modified after a refresh(),
 so you should always call getParentArray() again after a refresh().
 <P>
 This method's function is similar to allocating an array of size
 getSize() and filling it with getParent() calls, but implementations
 are encouraged to implement it much more efficiently, with O(1)
 complexity. This can be done, for example, by the implementation
 already keeping the parents in an array, and just returning this
 array (without any allocation or copying) when requested.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getChildrenArrays()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getChildrenArrays</h4>
<pre><a href="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.ChildrenArrays.html" title="interface in org.apache.lucene.facet.taxonomy">TaxonomyReader.ChildrenArrays</a>&nbsp;getChildrenArrays()</pre>
<div class="block">getChildrenArrays() returns a <a href="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.ChildrenArrays.html" title="interface in org.apache.lucene.facet.taxonomy"><code>TaxonomyReader.ChildrenArrays</code></a> object which can
 be used together to efficiently enumerate the children of any category. 
 <P>
 The caller can hold on to the object it got indefinitely - it is
 guaranteed that no-one else will modify it. The other side of the
 same coin is that the caller must treat the object which it got (and
 the arrays it contains) as read-only and <B>not modify it</B>, because
 other callers might have gotten the same object too.
 <P>
 Implementations should have O(getSize()) time for the first call or
 after a refresh(), but O(1) time for further calls. In neither case
 there should be a need to read new data from disk. These guarantees
 are most likely achieved by calculating this object (based on the
 getParentArray()) when first needed, and later (if the taxonomy was not
 refreshed) returning the same object (without any allocation or copying)
 when requested.
 <P>
 The reason we have one method returning one object, rather than two
 methods returning two arrays, is to avoid race conditions in a multi-
 threaded application: We want to avoid the possibility of returning one
 new array and one old array, as those could not be used together.</div>
</li>
</ul>
<a name="getCommitUserData()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCommitUserData</h4>
<pre><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;getCommitUserData()
                                     throws <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Retrieve user committed data.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../org/apache/lucene/util/TwoPhaseCommit.html#commit(java.util.Map)"><code>TwoPhaseCommit.commit(Map)</code></a></dd></dl>
</li>
</ul>
<a name="incRef()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>incRef</h4>
<pre>void&nbsp;incRef()</pre>
<div class="block">Expert: increments the refCount of this TaxonomyReader instance. 
 RefCounts can be used to determine when a taxonomy reader can be closed 
 safely, i.e. as soon as there are no more references. 
 Be sure to always call a corresponding decRef(), in a finally clause; 
 otherwise the reader may never be closed.</div>
</li>
</ul>
<a name="decRef()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>decRef</h4>
<pre>void&nbsp;decRef()
            throws <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Expert: decreases the refCount of this TaxonomyReader instance. 
 If the refCount drops to 0, then pending changes (if any) can be  
 committed to the taxonomy index and this reader can be closed.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getRefCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRefCount</h4>
<pre>int&nbsp;getRefCount()</pre>
<div class="block">Expert: returns the current refCount for this taxonomy reader</div>
</li>
</ul>
<a name="getSize()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getSize</h4>
<pre>int&nbsp;getSize()</pre>
<div class="block">getSize() returns the number of categories in the taxonomy.
 <P>
 Because categories are numbered consecutively starting with 0, it
 means the taxonomy contains ordinals 0 through getSize()-1.
 <P>
 Note that the number returned by getSize() is often slightly higher
 than the number of categories inserted into the taxonomy; This is
 because when a category is added to the taxonomy, its ancestors
 are also added automatically (including the root, which always get
 ordinal 0).</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TaxonomyReader.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/lucene/facet/taxonomy/InconsistentTaxonomyException.html" title="class in org.apache.lucene.facet.taxonomy"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.ChildrenArrays.html" title="interface in org.apache.lucene.facet.taxonomy"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/lucene/facet/taxonomy/TaxonomyReader.html" target="_top">Frames</a></li>
<li><a href="TaxonomyReader.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>
          <script src='../../../../../prettify.js' type='text/javascript'></script>
          <script type='text/javascript'>
            (function(){
              var oldonload = window.onload;
              if (typeof oldonload != 'function') {
                window.onload = prettyPrint;
              } else {
                window.onload = function() {
                  oldonload();
                  prettyPrint();
                }
              }
            })();
          </script>
        </small></p>
</body>
</html>
